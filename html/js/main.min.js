"use strict";!function(){var a=function(){function a(){this.hoverFriends(),this.followAllFriends(),this.followOneFriend(),this.hoverOrgs(),this.followOneInOrg(),this.followAllInOrgs(),this.searchOrg(),$("#friends").find("a").tooltip({placement:"bottom"}),$(".members").find("li a").tooltip({placement:"bottom"})}return a.prototype.hoverFriends=function(){$("#friends").find("a").on("mouseenter",function(){var a=$(this).find("span");a.hasClass("follow")?a.addClass("no"):a.addClass("yes")}).on("mouseleave",function(){var a=$(this).find("span");a.hasClass("follow")?a.removeClass("no"):a.removeClass("no").removeClass("yes")})},a.prototype.followOneFriend=function(){$("#friends").find("a").on("click",function(a){var b=$(".loading"),c=$("#msg"),d=$(this),e="follow",f=d.attr("data-user");b.is(":visible")||(b.slideToggle(),d.find("span").hasClass("follow")&&(e="unfollow"),$.ajax({url:"",type:"POST",data:{},success:function(){b.hide(),c.addClass("sucess").find("p").text("You now "+e+" @"+f+"!"),"unfollow"==e?d.find("span").removeClass("follow").each(function(){d.attr("data-original-title","Follow @"+d.attr("data-user"))}):d.find("span").addClass("follow").each(function(){d.attr("data-original-title","Unfollow @"+d.attr("data-user"))}),c.slideToggle(),setTimeout(function(){c.slideToggle()},6e3)},error:function(){b.hide(),c.addClass("error").find("p").text("Error my friend, try again!"),c.slideToggle(),setTimeout(function(){c.slideToggle()},6e3)}})),a.preventDefault()})},a.prototype.followAllFriends=function(){$("#followAllFriends").on("click",function(a){var b=$(".loading"),c=$("#msg");b.is(":visible")||(b.slideToggle(),$.ajax({url:"",type:"POST",data:{},success:function(){b.hide(),c.addClass("sucess").find("p").text("Congratz, you follow everyone now!"),c.slideToggle(),$("#friends").find("span").addClass("yes").each(function(){var a=$(this).parent();a.attr("data-original-title","Unfollow @"+a.attr("data-user"))}),setTimeout(function(){c.slideToggle()},6e3)},error:function(){b.hide(),c.addClass("error").find("p").text("Error my friend, try again!"),c.slideToggle(),setTimeout(function(){c.slideToggle()},6e3)}})),a.preventDefault()})},a.prototype.hoverOrgs=function(){$(".members").find("li a").on("mouseenter",function(){var a=$(this).find("span");a.hasClass("follow")?a.addClass("no"):a.addClass("yes")}).on("mouseleave",function(){var a=$(this).find("span");a.hasClass("follow")?a.removeClass("no"):a.removeClass("no").removeClass("yes")})},a.prototype.followOneInOrg=function(){$(".members").find("li a").on("click",function(a){var b=$(".loading"),c=$("#msg"),d=$(this),e="follow",f=d.attr("data-user");b.is(":visible")||(b.slideToggle(),d.find("span").hasClass("follow")&&(e="unfollow"),$.ajax({url:"",type:"POST",data:{},success:function(){b.hide(),c.addClass("sucess").find("p").text("You now "+e+" @"+f+"!"),"unfollow"==e?d.find("span").removeClass("follow").each(function(){d.attr("data-original-title","Follow @"+d.attr("data-user"))}):d.find("span").addClass("follow").each(function(){d.attr("data-original-title","Unfollow @"+d.attr("data-user"))}),c.slideToggle(),setTimeout(function(){c.slideToggle()},6e3)},error:function(){b.hide(),c.addClass("error").find("p").text("Error my friend, try again!"),c.slideToggle(),setTimeout(function(){c.slideToggle()},6e3)}})),a.preventDefault()})},a.prototype.followAllInOrgs=function(){$(".followorg").on("click",function(a){{var b=$(this),c=$(".loading"),d=$("#msg");b.attr("data-org")}c.is(":visible")||(c.slideToggle(),$.ajax({url:"",type:"POST",data:{},success:function(){c.hide(),d.addClass("sucess").find("p").text("Congratz, you follow everyone now!"),d.slideToggle(),b.parent().parent().find(".members span").addClass("yes").each(function(){var a=$(this).parent();a.attr("data-original-title","Unfollow @"+a.attr("data-user"))}),setTimeout(function(){d.slideToggle()},6e3)},error:function(){c.hide(),d.addClass("error").find("p").text("Error my friend, try again!"),d.slideToggle(),setTimeout(function(){d.slideToggle()},6e3)}})),a.preventDefault()})},a.prototype.searchOrg=function(){classe=this,$("#orgForm").on("submit",function(a){var b=$("#orgSearch"),c=$(".loading"),d=$("#msg");""===b.val()||c.is(":visible")||(c.slideToggle(),$.ajax({url:"",type:"POST",data:{orgName:b.val()},success:function(a){var b,e=JSON&&JSON.parse(a)||$.parseJSON(a);return c.hide(),""==e.name?(d.addClass("error").find("p").text("Sorry man, this organization doesn't exist!"),d.slideToggle(),setTimeout(function(){d.slideToggle()},6e3),!1):(b='<div class="org-avatar"><img src="'+e.avatar+'" width="240" height="240" alt=""></div>',b+='<div class="members">',b+="<h3><span>Members of "+e.name+'</span> <a href="http://github.com/'+e.name+'" class="btn followorg" data=org="'+e.name+'">Follow everyone in '+e.name+"</a></h3><ul>",$.each(e.members,function(a){action="",title="Follow",e.members[a].isFollowed&&(action="follow",title="Unfollow"),b+='<li><a href="http://github.com/'+e.members[a].user+'" data-toggle="tooltip" title="'+title+" @"+e.members[a].user+'" data-user="'+e.members[a].user+'"><img src="'+e.members[a].avatar+'" width="70" height="70" alt=""><span class="'+action+'"></span></a></li>'}),b+="</ul></div>",$("#searchOrg").html(b),classe.hoverOrgs(),classe.followOneInOrg(),classe.followAllInOrgs(),void 0)},error:function(){c.hide(),d.addClass("error").find("p").text("Error my friend, try again!"),d.slideToggle(),setTimeout(function(){d.slideToggle()},6e3)}})),a.preventDefault()})},a}();$(document).ready(function(){new a})}();